[phases.setup]
nixPkgs = ['nodejs-18_x', 'npm-9_x']

[phases.install]
cmds = [
    'npm ci',
    'cd server && npm ci',
    'cd client && npm ci'
]

[phases.build]
cmds = [
    'echo "Building client application..."',
    'cd client && npm install && npm run build',
    'echo "Client build completed"',
    'ls -la client/dist || echo "Client dist directory not found"'
]

[start]
cmd = 'npm run railway:start'